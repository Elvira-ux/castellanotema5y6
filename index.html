<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AULA KIDS ¬∑ Curso Intensivo Castellano 6¬∫</title>
    <style>
        :root {
            /* Palette Defaults (Light Mode) */
            --blue: #228CC7;
            --green: #88B93E;
            --orange: #FD9D17;
            --turquoise: #2AB4CD;
            --white: #ffffff;
            --grey-light: #f4f7f6;
            --text-main: #333;
            --card-bg: #ffffff;
            --radius: 15px;
            --shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        /* Dark Mode Variables */
        body.dark-mode {
            --grey-light: #121212;
            --text-main: #e0e0e0;
            --card-bg: #1e1e1e;
            --white: #1e1e1e;
            --shadow: 0 4px 12px rgba(0,0,0,0.5);
        }

        /* Adjust elements for Dark Mode */
        body.dark-mode .theory-box { background: #2c3e50; border-color: #4a6fa5; color: #ddd; }
        body.dark-mode .tricks-box { background: #4e342e; border-left-color: var(--orange); color: #ddd; }
        body.dark-mode .mnemonic-card { background: #333; border-color: #555; }
        body.dark-mode .mnemonic-text { color: #ccc; }
        body.dark-mode .quiz-container { background: #252525; }
        body.dark-mode .options button { background: #333; color: white; border-color: #555; }
        body.dark-mode .options button:hover { background: #444; }
        body.dark-mode .block-header { background: #2a2a2a; color: var(--turquoise); }
        body.dark-mode .block-header:hover { background: #333; }
        body.dark-mode .stats-card, body.dark-mode .home-hero { background: var(--card-bg); }
        body.dark-mode .brand-aula { color: #4fc3f7; } 
        body.dark-mode .brand-kids { color: #aed581; }

        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--grey-light);
            margin: 0;
            padding: 0;
            color: var(--text-main);
            padding-bottom: 120px; /* More space for the bigger footer */
            transition: background-color 0.3s, color 0.3s;
        }

        /* HEADER */
        header {
            background: linear-gradient(135deg, var(--blue), var(--turquoise));
            color: #fff;
            padding: 20px;
            text-align: center;
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        h1 { margin: 0; font-size: 1.5rem; }
        .subtitle { font-size: 0.9rem; opacity: 0.9; }

        /* DARK MODE TOGGLE */
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            border: 2px solid white;
            color: white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: 0.3s;
        }
        .theme-toggle:hover { background: white; color: var(--blue); }

        /* NAVIGATION */
        .nav-bar {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .btn-nav {
            background: rgba(255,255,255,0.2);
            border: 2px solid white;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .btn-nav:hover, .btn-nav.active {
            background: #fff;
            color: var(--blue);
            transform: translateY(-2px);
        }

        /* MAIN CONTAINER */
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 0 15px;
        }

        /* VIEWS */
        .view { display: none; animation: fadeIn 0.5s; }
        .view.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- HOME HERO SECTION (NEW) --- */
        .home-hero {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 40px 20px;
            text-align: center;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
            border-top: 8px solid var(--turquoise);
        }

        /* Decorative circles */
        .deco-circle {
            position: absolute;
            border-radius: 50%;
            opacity: 0.1;
            z-index: 0;
        }
        .dc-1 { width: 100px; height: 100px; background: var(--blue); top: -20px; left: -20px; }
        .dc-2 { width: 150px; height: 150px; background: var(--green); bottom: -40px; right: -40px; }
        .dc-3 { width: 60px; height: 60px; background: var(--orange); top: 20px; right: 20%; }

        .brand-logo-text {
            font-size: 3.5rem;
            font-weight: 900;
            margin-bottom: 5px;
            position: relative;
            z-index: 1;
            line-height: 1;
        }
        .brand-aula { color: var(--blue); }
        .brand-kids { color: var(--green); }
        .brand-slogan {
            color: var(--orange);
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        /* STATS IN HOME */
        .stats-grid {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            position: relative;
            z-index: 1;
            flex-wrap: wrap;
        }
        .stat-item {
            background: var(--grey-light);
            padding: 15px 25px;
            border-radius: 12px;
            text-align: center;
            flex: 1;
            min-width: 140px;
        }
        .stat-val { font-size: 2rem; font-weight: bold; color: var(--blue); }
        .stat-label { font-size: 0.9rem; color: var(--text-main); opacity: 0.8; }

        /* THEME BLOCKS */
        .block-card {
            background: var(--card-bg);
            border-radius: var(--radius);
            margin-bottom: 25px;
            overflow: hidden;
            box-shadow: var(--shadow);
            border-left: 6px solid var(--green);
        }

        .block-header {
            background: #f9f9f9;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            font-weight: bold;
            color: var(--blue);
        }
        
        .block-header:hover { background: #eef; }
        .block-content { padding: 20px; display: none; }
        .block-content.open { display: block; }

        .section-title {
            color: var(--orange);
            border-bottom: 2px solid var(--orange);
            padding-bottom: 5px;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .key-points ul { list-style-type: "‚≠ê "; padding-left: 20px; }
        .theory-box { background: #f0f8ff; padding: 15px; border-radius: 10px; border: 1px dashed var(--blue); font-size: 0.95rem; line-height: 1.5; }
        
        .tricks-box { 
            background: #fff8e1; 
            padding: 15px; 
            border-radius: 10px; 
            border-left: 4px solid var(--orange); 
            margin-top: 15px; 
        }

        /* QUIZ */
        .quiz-container { margin-top: 20px; background: #f4f7f6; padding: 15px; border-radius: 10px; }
        .question { font-weight: bold; margin-bottom: 10px; }
        .options button {
            display: block; width: 100%; padding: 10px; margin: 5px 0;
            border: 1px solid #ccc; border-radius: 8px; background: var(--card-bg);
            cursor: pointer; text-align: left; transition: 0.2s; color: var(--text-main);
        }
        .options button:hover { background: #e6f7ff; }
        .options button.correct { background: var(--green); color: white; border-color: var(--green); }
        .options button.incorrect { background: #ff6b6b; color: white; border-color: #ff6b6b; }
        .feedback { margin-top: 10px; font-size: 0.95rem; padding: 10px; border-radius: 8px; display: none; line-height: 1.4; }
        .feedback.show { display: block; animation: fadeIn 0.3s; }
        .feedback.success { background-color: #e8f5e9; color: #2e7d32; border: 1px solid #c8e6c9; }
        .feedback.error { background-color: #ffebee; color: #c62828; border: 1px solid #ffcdd2; }

        .reveal-btn { background: var(--turquoise); color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; margin-top: 5px; font-size: 0.8rem; }
        .model-answer { display: none; color: var(--text-main); font-style: italic; margin-top: 5px; background: #e0f7fa; padding: 5px; border-radius: 5px; color: #333;}
        .checklist label { display: block; margin: 8px 0; cursor: pointer; }
        .checklist input { margin-right: 10px; transform: scale(1.2); }

        /* MNEMONIC CARDS */
        .mnemonic-card {
            display: flex;
            align-items: center;
            background: var(--card-bg);
            border-radius: 10px;
            padding: 10px;
            margin-top: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            border: 1px solid #ffe0b2;
        }
        .mnemonic-icon { font-size: 2.5rem; margin-right: 15px; min-width: 50px; text-align: center; }
        .mnemonic-text { font-size: 0.9rem; color: #5d4037; }
        .mnemonic-text strong { color: var(--orange); }

        /* SIMULACRO & FLASHCARDS */
        .simulacro-box { text-align: center; padding: 20px; }
        .big-btn { background: var(--orange); color: white; border: none; padding: 15px 30px; font-size: 1.2rem; border-radius: 30px; cursor: pointer; box-shadow: 0 4px 0 #d37c00; transition: 0.2s; font-weight: bold;}
        .big-btn:active { transform: translateY(4px); box-shadow: none; }
        
        .deck-selector { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; }
        .deck-btn { background: var(--card-bg); border: 2px solid var(--blue); color: var(--blue); padding: 8px 16px; border-radius: 20px; cursor: pointer; font-weight: bold; transition: 0.2s; font-size: 0.9rem; }
        .deck-btn.active { background: var(--blue); color: white; }

        .flashcard-scene { width: 100%; max-width: 500px; height: 200px; margin: 20px auto; perspective: 600px; cursor: pointer; }
        .flashcard { width: 100%; height: 100%; position: relative; transition: transform 0.6s; transform-style: preserve-3d; }
        .flashcard.flipped { transform: rotateY(180deg); }
        .flashcard-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; flex-direction: column; border-radius: 15px; padding: 15px; box-shadow: 0 4px 8px rgba(0,0,0,0.15); font-size: 1.1rem; text-align: center; border: 1px solid rgba(0,0,0,0.05); }
        .flashcard-front { background: linear-gradient(135deg, var(--blue), var(--turquoise)); color: white; }
        .flashcard-back { background: var(--white); color: var(--text-main); transform: rotateY(180deg); border: 2px solid var(--blue); }
        .flashcard-controls { display: flex; justify-content: center; gap: 20px; margin-top: 20px; }

        /* DIPLOMA */
        #diploma-section { display: none; margin-top: 30px; text-align: center; }
        #diploma-container { background: #fff; color: #333; border: 10px double var(--blue); padding: 40px; border-radius: 10px; position: relative; text-align: center; margin: 20px auto; max-width: 700px; box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
        #diploma-container h2 { font-family: 'Georgia', serif; color: var(--blue); font-size: 2.5rem; margin-bottom: 10px; }
        #diploma-container .diploma-text { font-size: 1.2rem; margin: 20px 0; }
        #student-name-display { font-family: 'Brush Script MT', cursive; font-size: 3rem; color: var(--orange); border-bottom: 2px solid #ccc; display: inline-block; padding: 0 20px; min-width: 200px; }
        #diploma-seal { font-size: 4rem; margin-top: 20px; }
        .print-only { display: none; }

        @media print {
            body * { visibility: hidden; }
            #diploma-container, #diploma-container * { visibility: visible; }
            #diploma-container { position: absolute; left: 0; top: 0; width: 100%; margin: 0; border: 5px double #000; }
            .no-print { display: none !important; }
        }

        /* --- FOOTER IMPROVED --- */
        footer {
            background: linear-gradient(90deg, var(--blue) 0%, var(--green) 100%);
            color: white;
            text-align: center;
            padding: 30px 15px;
            font-size: 1.1rem;
            position: fixed;
            bottom: 0;
            width: 100%;
            z-index: 100;
            box-shadow: 0 -5px 15px rgba(0,0,0,0.1);
        }
        
        .footer-content {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .footer-brand {
            font-weight: 800;
            font-size: 1.4rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .footer-info {
            opacity: 0.9;
            font-size: 1rem;
        }

        .footer-separator {
            width: 5px;
            height: 5px;
            background: white;
            border-radius: 50%;
            display: inline-block;
            vertical-align: middle;
        }

        /* RESPONSIVE */
        @media (max-width: 600px) {
            .btn-nav { flex: 1 1 40%; font-size: 0.9rem; }
            h1 { font-size: 1.2rem; }
            #student-name-display { font-size: 2rem; }
            .deck-btn { padding: 6px 10px; font-size: 0.8rem; }
            .brand-logo-text { font-size: 2.5rem; }
            .stats-grid { gap: 10px; }
            .stat-item { padding: 10px; }
            .footer-content { flex-direction: column; gap: 5px; }
        }
    </style>
</head>
<body>

    <!-- HEADER -->
    <header>
        <h1>AULA KIDS üöÄ</h1>
        <div class="subtitle">Curso Intensivo Castellano 6¬∫ (Tema 5 y 6)</div>
        <button class="theme-toggle" onclick="toggleTheme()" title="Cambiar Tema">üåó</button>
        <nav class="nav-bar">
            <button class="btn-nav active" onclick="showView('home')">Inicio</button>
            <button class="btn-nav" onclick="showView('tema5')">Tema 5</button>
            <button class="btn-nav" onclick="showView('tema6')">Tema 6</button>
            <button class="btn-nav" onclick="showView('flashcards')">Repaso üÉè</button>
            <button class="btn-nav" onclick="showView('simulacro')">Simulacro</button>
        </nav>
    </header>

    <div class="container">

        <!-- VIEW: HOME -->
        <div id="home" class="view active">
            
            <!-- NEW HOME HERO SECTION -->
            <div class="home-hero">
                <div class="deco-circle dc-1"></div>
                <div class="deco-circle dc-2"></div>
                <div class="deco-circle dc-3"></div>

                <div class="brand-logo-text">
                    <span class="brand-aula">Aula</span> <span class="brand-kids">Kids</span>
                </div>
                <div class="brand-slogan">Apoyo escolar 100% online</div>

                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-val" id="globalProgress">0%</div>
                        <div class="stat-label">Progreso Global</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-val"><span id="blocksCompleted">0</span>/8</div>
                        <div class="stat-label">Bloques Listos</div>
                    </div>
                </div>

                <div class="badges">
                    <span class="badge" id="badge5" title="Tema 5 Dominado">üé®</span>
                    <span class="badge" id="badge6" title="Tema 6 Dominado">üíß</span>
                    <span class="badge" id="badgeSim" title="Maestro del Examen">üèÜ</span>
                </div>
            </div>

            <!-- DIPLOMA UNLOCK SECTION -->
            <div id="diploma-unlock-msg" style="text-align: center; display: none; margin-bottom: 20px; background: #fffde7; padding: 15px; border-radius: 10px; border: 2px solid var(--orange);">
                <h3 style="color: var(--orange);">¬°Enhorabuena! üéâ</h3>
                <p>Has completado el 100% del curso. ¬°Tu diploma te espera!</p>
                <button class="big-btn" onclick="openDiplomaSetup()">üéì Obtener Diploma</button>
            </div>

            <div class="block-card" style="border-left-color: var(--blue);">
                <div class="block-header" onclick="showView('tema5')">
                    <span>üé® Tema 5: ¬øQui√©n es artista?</span>
                    <span>Ir al tema ‚Üí</span>
                </div>
            </div>

            <div class="block-card" style="border-left-color: var(--turquoise);">
                <div class="block-header" onclick="showView('tema6')">
                    <span>üíß Tema 6: ¬øQueda agua?</span>
                    <span>Ir al tema ‚Üí</span>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn-nav" style="background:var(--blue); color:white;" onclick="resetProgress()">üîÑ Resetear Progreso</button>
            </div>
        </div>

        <!-- VIEW: FLASHCARDS -->
        <div id="flashcards" class="view">
            <h2 style="color: var(--blue); text-align: center;">üÉè Preguntas Clave de Examen</h2>
            
            <div class="deck-selector">
                <button class="deck-btn" onclick="setDeck('t5')" id="btn-deck-t5">üé® Tema 5</button>
                <button class="deck-btn" onclick="setDeck('t6')" id="btn-deck-t6">üíß Tema 6</button>
                <button class="deck-btn active" onclick="setDeck('mix')" id="btn-deck-mix">üîÄ Todo</button>
            </div>

            <p style="text-align: center; font-size: 0.9rem; opacity: 0.8;">Haz clic para girar la tarjeta</p>
            
            <div class="flashcard-scene" onclick="flipCard()">
                <div class="flashcard" id="flashcardElement">
                    <div class="flashcard-face flashcard-front">
                        <p style="font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; opacity: 0.7;">Pregunta</p>
                        <h3 id="fc-front-text" style="font-size: 1.3rem;">Cargando...</h3>
                    </div>
                    <div class="flashcard-face flashcard-back">
                        <p style="font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; opacity: 0.7; color: var(--orange);">Respuesta</p>
                        <h3 id="fc-back-text" style="font-size: 1.2rem;">...</h3>
                    </div>
                </div>
            </div>

            <div class="flashcard-controls">
                <button class="btn-nav" style="background: var(--orange);" onclick="prevCard()">‚¨ÖÔ∏è Anterior</button>
                <span id="fc-counter" style="align-self: center; font-weight: bold;">1 / 8</span>
                <button class="btn-nav" style="background: var(--green);" onclick="nextCard()">Siguiente ‚û°Ô∏è</button>
            </div>
        </div>

        <!-- VIEW: TEMA 5 -->
        <div id="tema5" class="view">
            <h2 style="color: var(--blue);">Tema 5: Vocabulario, Gram√°tica y Literatura</h2>
            
            <!-- BLOQUE 1 -->
            <div class="block-card" id="t5_b1">
                <div class="block-header" onclick="toggleBlock('t5_b1_content')">
                    <span>1. Vocabulario: Prefijos</span>
                    <span id="check_t5_b1">‚ö™</span>
                </div>
                <div class="block-content" id="t5_b1_content">
                    <div class="section-title">üìå Puntos Clave</div>
                    <div class="key-points">
                        <ul>
                            <li>Los prefijos van <strong>delante</strong> de la palabra.</li>
                            <li>Cambian el significado (negaci√≥n, lugar, intensidad, etc.).</li>
                        </ul>
                    </div>
                    <div class="section-title">üìñ Teor√≠a Esencial</div>
                    <div class="theory-box">
                        <p><strong>Clases de prefijos:</strong></p>
                        <ul>
                            <li><strong>Negaci√≥n:</strong> a-, des-, in- (i-, im-). Ej: <em>at√≠pico, descubrir, incapaz.</em></li>
                            <li><strong>Oposici√≥n:</strong> anti-, contra-. Ej: <em>antihigi√©nico, contragolpe.</em></li>
                            <li><strong>Situaci√≥n:</strong> ante-, extra-, inter-, pre-, sobre-, sub-. Ej: <em>anteojo, extraordinario, interl√≠nea.</em></li>
                            <li><strong>Intensidad:</strong> archi-, re-, super-, ultra-. Ej: <em>archiconocido, reseco, superligero.</em></li>
                        </ul>
                    </div>
                    <div class="tricks-box">
                        <strong>üí° Mnemotecnia Visual:</strong>
                        <div class="mnemonic-card">
                            <div class="mnemonic-icon">‚¨áÔ∏è</div>
                            <div class="mnemonic-text"><strong>SUB-</strong> significa "debajo".<br>Imagina un <strong>Submarino</strong> navegando <em>debajo</em> del mar.</div>
                        </div>
                    </div>
                    <div class="section-title">üéÆ Pr√°ctica</div>
                    <div class="quiz-container" id="q_t5_b1"></div>
                    <div class="section-title">‚úÖ Checklist</div>
                    <div class="checklist">
                        <label><input type="checkbox" onchange="updateProgress()"> S√© qu√© es un prefijo.</label>
                        <label><input type="checkbox" onchange="updateProgress()"> Distingo prefijos de negaci√≥n y oposici√≥n.</label>
                        <label><input type="checkbox" onchange="updateProgress()"> S√© usar prefijos de intensidad.</label>
                    </div>
                </div>
            </div>

            <!-- BLOQUE 2 -->
            <div class="block-card" id="t5_b2">
                <div class="block-header" onclick="toggleBlock('t5_b2_content')">
                    <span>2. Ortograf√≠a: La B y la V</span>
                    <span id="check_t5_b2">‚ö™</span>
                </div>
                <div class="block-content" id="t5_b2_content">
                    <div class="section-title">üìñ Teor√≠a Esencial</div>
                    <div class="theory-box">
                        <p><strong>Se escriben con B:</strong> Verbos en -bir (exc: hervir, servir, vivir), bu-, bur-, bus-, terminaci√≥n -bilidad (exc: movilidad), pret√©rito -aba.</p>
                        <p><strong>Se escriben con V:</strong> Adjetivos en -ava/ave/avo..., formas verbales sin b/v en infinitivo (anduve).</p>
                    </div>
                    <div class="tricks-box">
                        <strong>üí° Mnemotecnia Visual:</strong>
                        <div class="mnemonic-card">
                            <div class="mnemonic-icon">üî•üçµ</div>
                            <div class="mnemonic-text">"Para <strong>ViVir</strong> hay que <strong>SerVir</strong> y no <strong>HerVir</strong>." (Excepciones de -bir)</div>
                        </div>
                    </div>
                    <div class="section-title">üéÆ Pr√°ctica</div>
                    <div class="quiz-container" id="q_t5_b2"></div>
                    <div class="checklist">
                        <label><input type="checkbox" onchange="updateProgress()"> Recuerdo las 3 excepciones de -bir.</label>
                        <label><input type="checkbox" onchange="updateProgress()"> S√© que -aba siempre es con B.</label>
                    </div>
                </div>
            </div>

            <!-- BLOQUE 3 -->
            <div class="block-card" id="t5_b3">
                <div class="block-header" onclick="toggleBlock('t5_b3_content')">
                    <span>3. Gram√°tica: El Verbo</span>
                    <span id="check_t5_b3">‚ö™</span>
                </div>
                <div class="block-content" id="t5_b3_content">
                    <div class="section-title">üìñ Teor√≠a Esencial</div>
                    <div class="theory-box">
                        <p><strong>Estructura:</strong> Ra√≠z + Desinencia.</p>
                        <p><strong>Irregulares:</strong> Cambian ra√≠z o desinencia (Conjuga presente/pasado/futuro para comprobar).</p>
                        <p><strong>Defectivos:</strong> Faltan formas (llover).</p>
                    </div>
                    <div class="section-title">üéÆ Pr√°ctica</div>
                    <div class="quiz-container" id="q_t5_b3"></div>
                    <div class="open-question">
                        <p><strong>Pregunta Corta:</strong> ¬øPor qu√© el verbo "llover" es defectivo?</p>
                        <button class="reveal-btn" onclick="this.nextElementSibling.style.display='block'">Ver respuesta</button>
                        <div class="model-answer">Porque solo se usa en 3¬™ persona del singular (llueve).</div>
                    </div>
                    <div class="checklist">
                        <label><input type="checkbox" onchange="updateProgress()"> S√© separar ra√≠z y desinencia.</label>
                        <label><input type="checkbox" onchange="updateProgress()"> Conozco formas no personales.</label>
                    </div>
                </div>
            </div>

            <!-- BLOQUE 4 -->
            <div class="block-card" id="t5_b4">
                <div class="block-header" onclick="toggleBlock('t5_b4_content')">
                    <span>4. Literatura: La L√≠rica</span>
                    <span id="check_t5_b4">‚ö™</span>
                </div>
                <div class="block-content" id="t5_b4_content">
                    <div class="theory-box">
                        <p><strong>L√≠rica:</strong> Expresa sentimientos en verso.</p>
                        <p><strong>L√≠rica Tradicional:</strong> Popular, an√≥nima, oral, temas de amor/trabajo.</p>
                    </div>
                    <div class="checklist">
                        <label><input type="checkbox" onchange="updateProgress()"> Entiendo qu√© es la l√≠rica.</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- VIEW: TEMA 6 -->
        <div id="tema6" class="view">
            <h2 style="color: var(--turquoise);">Tema 6: Argumentaci√≥n, Ortograf√≠a y Gram√°tica</h2>

            <!-- BLOQUE 1 -->
            <div class="block-card" id="t6_b1">
                <div class="block-header" onclick="toggleBlock('t6_b1_content')">
                    <span>1. Lectura: La Argumentaci√≥n</span>
                    <span id="check_t6_b1">‚ö™</span>
                </div>
                <div class="block-content" id="t6_b1_content">
                    <div class="section-title">üìñ Teor√≠a Esencial</div>
                    <div class="theory-box">
                        <p><strong>Estructura:</strong> Tesis (idea), Argumentos (razones), Conclusi√≥n.</p>
                    </div>
                    <div class="checklist">
                        <label><input type="checkbox" onchange="updateProgress()"> S√© identificar la tesis.</label>
                    </div>
                </div>
            </div>

            <!-- BLOQUE 2 -->
            <div class="block-card" id="t6_b2">
                <div class="block-header" onclick="toggleBlock('t6_b2_content')">
                    <span>2. Ortograf√≠a: La G y la J</span>
                    <span id="check_t6_b2">‚ö™</span>
                </div>
                <div class="block-content" id="t6_b2_content">
                    <div class="section-title">üìñ Teor√≠a Esencial</div>
                    <div class="theory-box">
                        <p><strong>Con G:</strong> Geo-, gen (exc: -jar/-jer), -ger/-gir (exc: tejer, crujir).</p>
                        <p><strong>Con J:</strong> -aje, -eje, verbos con sonido J sin g/j en infinitivo (decir-dije).</p>
                    </div>
                    <div class="tricks-box">
                        <strong>üí° Mnemotecnia Visual:</strong>
                        <div class="mnemonic-card">
                            <div class="mnemonic-icon">üåç</div>
                            <div class="mnemonic-text"><strong>GEO-</strong> siempre con G (Geograf√≠a = Tierra).</div>
                        </div>
                    </div>
                    <div class="quiz-container" id="q_t6_b2"></div>
                    <div class="checklist">
                        <label><input type="checkbox" onchange="updateProgress()"> Excepciones tejer y crujir (J).</label>
                        <label><input type="checkbox" onchange="updateProgress()"> -aje siempre J.</label>
                    </div>
                </div>
            </div>

            <!-- BLOQUE 3 -->
            <div class="block-card" id="t6_b3">
                <div class="block-header" onclick="toggleBlock('t6_b3_content')">
                    <span>3. Gram√°tica: Palabras Invariables</span>
                    <span id="check_t6_b3">‚ö™</span>
                </div>
                <div class="block-content" id="t6_b3_content">
                    <div class="section-title">üìñ Teor√≠a Esencial</div>
                    <div class="theory-box">
                        <p><strong>Adverbios:</strong> Lugar, Tiempo, Modo, Cantidad...</p>
                        <p><strong>Preposiciones:</strong> a, ante, bajo, con... (unen palabras).</p>
                        <p><strong>Conjunciones:</strong> y, ni (copulativas), o (disyuntivas), pero (adversativas).</p>
                    </div>
                    <div class="quiz-container" id="q_t6_b3"></div>
                    <div class="checklist">
                        <label><input type="checkbox" onchange="updateProgress()"> Conozco las preposiciones.</label>
                    </div>
                </div>
            </div>

            <!-- BLOQUE 4 -->
            <div class="block-card" id="t6_b4">
                <div class="block-header" onclick="toggleBlock('t6_b4_content')">
                    <span>4. Escritura: Art√≠culo de Opini√≥n</span>
                    <span id="check_t6_b4">‚ö™</span>
                </div>
                <div class="block-content" id="t6_b4_content">
                    <div class="checklist">
                        <label><input type="checkbox" onchange="updateProgress()"> S√© estructurar mi opini√≥n.</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- VIEW: SIMULACRO -->
        <div id="simulacro" class="view">
            <h2 style="color: var(--orange); text-align: center;">üèÜ Simulacro de Examen</h2>
            <div class="simulacro-box" id="startSimContainer">
                <button class="big-btn" onclick="startSimulacro()">¬°Empezar Examen!</button>
            </div>
            <div id="simulacroContainer" style="display:none;">
                <div id="simulacroQuestions"></div>
                <button class="big-btn" style="margin-top:20px; background: var(--green);" onclick="gradeSimulacro()">Corregir Examen</button>
            </div>
            <div id="simulacroResult" style="display:none; text-align:center; margin-top:20px; padding: 20px; background: var(--card-bg); border-radius: 15px;">
                <h3>Resultado Final</h3>
                <div style="font-size: 3rem; font-weight: bold; color: var(--blue);" id="finalScore">0/20</div>
                <p id="finalFeedback"></p>
                <button class="btn-nav" style="background:var(--blue); color:white; margin-top:10px;" onclick="showView('home')">Volver al Inicio</button>
            </div>
        </div>

        <!-- DIPLOMA MODAL/VIEW -->
        <div id="diploma-view" class="view">
            <h2 style="text-align: center; color: var(--orange);">üéì Tu Diploma</h2>
            
            <div id="name-input-section" style="text-align: center; margin-top: 50px;">
                <p>¬°Has completado todo el curso! Escribe tu nombre para generar tu certificado.</p>
                <input type="text" id="studentNameInput" placeholder="Tu Nombre Aqu√≠" style="padding: 10px; font-size: 1.2rem; border-radius: 5px; border: 2px solid var(--blue);">
                <br><br>
                <button class="big-btn" onclick="generateDiploma()">Generar</button>
            </div>

            <div id="diploma-section">
                <div id="diploma-container">
                    <h2>CERTIFICADO DE LOGRO</h2>
                    <div class="diploma-text">Se otorga el presente diploma a:</div>
                    <div id="student-name-display">Nombre Alumno</div>
                    <div class="diploma-text">Por haber completado con √©xito el<br><strong>Curso Intensivo de Castellano (Tema 5 y 6)</strong></div>
                    <div id="diploma-seal">üèÖ</div>
                    <div style="margin-top: 30px; font-size: 0.9rem; color: #666;">AULA KIDS ¬∑ Educaci√≥n Online</div>
                </div>
                <button class="big-btn no-print" onclick="window.print()" style="margin-top: 20px;">üñ®Ô∏è Imprimir / Guardar PDF</button>
                <button class="reset-btn no-print" onclick="showView('home')">Volver</button>
            </div>
        </div>

    </div>

    <!-- FOOTER IMPROVED -->
    <footer>
        <div class="footer-content">
            <div class="footer-brand">AULA KIDS üöÄ</div>
            <div class="footer-info">
                <span>aulakids513@gmail.com</span>
                <span class="footer-separator"></span>
                <span>WhatsApp 602 02 61 19</span>
            </div>
        </div>
    </footer>

    <script>
        /* --- AUDIO ENGINE --- */
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            
            if (type === 'correct') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(600, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1000, audioCtx.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                osc.start(); osc.stop(audioCtx.currentTime + 0.5);
            } else {
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.2);
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start(); osc.stop(audioCtx.currentTime + 0.3);
            }
        }

        /* --- DATA --- */
        const quizData = {
            t5_b1: [
                { q: "En 'antihigi√©nico', el prefijo 'anti-' indica...", options: ["Negaci√≥n", "Oposici√≥n", "Intensidad"], a: 1, expl: "Anti- significa oposici√≥n." },
                { q: "¬øPrefijo de intensidad?", options: ["Des-", "Re-", "Sub-"], a: 1, expl: "Re- indica intensidad (reseco)." },
                { q: "Prefijo que significa 'debajo':", options: ["Ante-", "Sub-", "Inter-"], a: 1, expl: "Sub- es debajo." }
            ],
            t5_b2: [
                { q: "¬ø'Movilidad' se escribe con...?", options: ["B", "V"], a: 1, expl: "Es excepci√≥n de -bilidad." },
                { q: "Verbo 'hervir' va con...", options: ["B", "V"], a: 1, expl: "Excepci√≥n de -bir." },
                { q: "Pasado 'cantaba' va con...", options: ["V", "B"], a: 1, expl: "Terminaci√≥n -aba siempre con B." }
            ],
            t5_b3: [
                { q: "Ra√≠z de 'correr':", options: ["Corr", "Corre"], a: 0, expl: "Quita -er." },
                { q: "Modo para dar √≥rdenes:", options: ["Indicativo", "Imperativo"], a: 1, expl: "Imperativo = Mandato." }
            ],
            t6_b2: [
                { q: "La palabra 'viage' est√°...", options: ["Bien", "Mal"], a: 1, expl: "-aje siempre con J (viaje)." },
                { q: "Pasado de decir (dije) va con...", options: ["G", "J"], a: 1, expl: "Sonido J sin g/j en infinitivo." }
            ],
            t6_b3: [
                { q: "Adverbio de lugar:", options: ["Ayer", "Aqu√≠", "Bien"], a: 1, expl: "Aqu√≠ indica lugar." },
                { q: "'Pero' es una conjunci√≥n...", options: ["Copulativa", "Adversativa"], a: 1, expl: "Indica contraposici√≥n." }
            ]
        };

        const simulacroPool = [
            ...quizData.t5_b1, ...quizData.t5_b2, ...quizData.t5_b3, ...quizData.t6_b2, ...quizData.t6_b3,
            { q: "Geo- va con...", options: ["J", "G"], a: 1, expl: "Geo siempre G." }
        ];

        /* --- FLASHCARDS DATA (Separated by Theme) --- */
        const fc_tema5 = [
            { f: "Prefijos de Negaci√≥n", b: "a-, des-, in- (i-, im-)" },
            { f: "Prefijos de Oposici√≥n", b: "anti-, contra-" },
            { f: "Prefijos de Situaci√≥n", b: "ante-, extra-, inter-, pre-, sobre-, sub-" },
            { f: "Prefijos de Intensidad", b: "archi-, re-, super-, ultra-" },
            { f: "Verbos en -BIR se escriben con...", b: "B (Excepto: hervir, servir, vivir)" },
            { f: "Pasado -ABA se escribe con...", b: "B (cantaba, jug√°bamos)" },
            { f: "Adjetivos en -AVA/AVE/AVO...", b: "Se escriben con V (nuevo, suave)" },
            { f: "¬øQu√© es la Ra√≠z de un verbo?", b: "La parte que queda al quitar -ar, -er, -ir" },
            { f: "¬øQu√© son Verbos Defectivos?", b: "Los que no tienen todas las formas (ej: llover)" },
            { f: "¬øQu√© es la L√≠rica?", b: "G√©nero en verso que expresa sentimientos" }
        ];

        const fc_tema6 = [
            { f: "Elementos del Texto Argumentativo", b: "Tesis (opini√≥n), Argumentos (razones) y Conclusi√≥n" },
            { f: "Palabras con GEO-", b: "Siempre con G (Geograf√≠a)" },
            { f: "Palabras terminadas en -AJE", b: "Siempre con J (Viaje, Garaje)" },
            { f: "Verbos en -GER / -GIR", b: "Con G (proteger). Excepto: tejer, crujir" },
            { f: "Sonidos J sin G/J en infinitivo", b: "Con J (Decir -> Dije; Traer -> Traje)" },
            { f: "¬øQu√© son Palabras Invariables?", b: "No cambian de g√©nero ni n√∫mero (Adverbios, Prep, Conj)" },
            { f: "Adverbios de Lugar", b: "aqu√≠, ah√≠, all√≠, cerca, lejos..." },
            { f: "Lista de Preposiciones (primeras)", b: "a, ante, bajo, con, contra, de, desde..." },
            { f: "Conjunciones Copulativas", b: "y, e, ni (suman)" },
            { f: "Conjunciones Adversativas", b: "pero, sino (contraponen)" }
        ];

        let currentDeck = [];
        let currentCard = 0;

        /* --- STATE --- */
        let progress = {};

        /* --- INIT --- */
        window.onload = function() {
            loadProgress();
            renderQuizzes();
            if(localStorage.getItem('aulakids_theme') === 'dark') {
                document.body.classList.add('dark-mode');
            }
            // Init deck with Mix
            setDeck('mix');
        };

        /* --- NAVIGATION --- */
        function showView(viewId) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.getElementById(viewId).classList.add('active');
            document.querySelectorAll('.btn-nav').forEach(b => b.classList.remove('active'));
            
            // Simple nav highlight mapping
            const navs = document.querySelectorAll('.btn-nav');
            if(viewId==='home') navs[0].classList.add('active');
            if(viewId==='tema5') navs[1].classList.add('active');
            if(viewId==='tema6') navs[2].classList.add('active');
            if(viewId==='flashcards') navs[3].classList.add('active');
            if(viewId==='simulacro') navs[4].classList.add('active');

            window.scrollTo(0,0);
        }

        function toggleBlock(id) {
            document.getElementById(id).classList.toggle('open');
        }

        /* --- DARK MODE --- */
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const theme = document.body.classList.contains('dark-mode') ? 'dark' : 'light';
            localStorage.setItem('aulakids_theme', theme);
        }

        /* --- FLASHCARDS LOGIC IMPROVED --- */
        function setDeck(type) {
            // Update active button
            document.querySelectorAll('.deck-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(`btn-deck-${type}`).classList.add('active');

            // Select data
            if(type === 't5') currentDeck = fc_tema5;
            else if(type === 't6') currentDeck = fc_tema6;
            else currentDeck = [...fc_tema5, ...fc_tema6].sort(() => 0.5 - Math.random()); // Mix and shuffle
            
            currentCard = 0;
            updateFlashcard();
        }

        function updateFlashcard() {
            const card = document.getElementById('flashcardElement');
            card.classList.remove('flipped'); // Reset flip
            
            // Wait for flip back to update text
            setTimeout(() => {
                if(currentDeck.length > 0) {
                    document.getElementById('fc-front-text').innerText = currentDeck[currentCard].f;
                    document.getElementById('fc-back-text').innerText = currentDeck[currentCard].b;
                    document.getElementById('fc-counter').innerText = `${currentCard + 1} / ${currentDeck.length}`;
                }
            }, 200);
        }

        function flipCard() {
            document.getElementById('flashcardElement').classList.toggle('flipped');
        }

        function nextCard() {
            if(currentCard < currentDeck.length - 1) {
                currentCard++;
                updateFlashcard();
            } else {
                currentCard = 0; // Loop
                updateFlashcard();
            }
        }

        function prevCard() {
            if(currentCard > 0) {
                currentCard--;
                updateFlashcard();
            }
        }

        /* --- DIPLOMA LOGIC --- */
        function openDiplomaSetup() {
            showView('diploma-view');
        }

        function generateDiploma() {
            const name = document.getElementById('studentNameInput').value;
            if(!name) return alert("Por favor, escribe tu nombre.");
            
            document.getElementById('student-name-display').innerText = name;
            document.getElementById('name-input-section').style.display = 'none';
            document.getElementById('diploma-section').style.display = 'block';
            playSound('correct');
        }

        /* --- QUIZ ENGINE --- */
        function renderQuizzes() {
            for (const [key, questions] of Object.entries(quizData)) {
                const container = document.getElementById(`q_${key}`);
                if (!container) continue;
                let html = '';
                questions.forEach((q, index) => {
                    const expl = q.expl || "";
                    html += `<div class="question-block" id="${key}_q${index}">
                        <div class="question">${index+1}. ${q.q}</div>
                        <div class="options">${q.options.map((opt, i) => 
                            `<button onclick="checkAnswer('${key}', ${index}, ${i}, ${q.a}, this)">${opt}</button>`
                        ).join('')}</div>
                        <div class="feedback" data-expl="${expl}"></div>
                    </div>`;
                });
                container.innerHTML = html;
            }
        }

        function checkAnswer(key, qIdx, uOpt, cOpt, btn) {
            const parent = document.getElementById(`${key}_q${qIdx}`);
            const fb = parent.querySelector('.feedback');
            const expl = fb.getAttribute('data-expl');
            parent.querySelectorAll('button').forEach(b => b.disabled=true);

            if(uOpt === cOpt) {
                btn.classList.add('correct');
                fb.innerHTML = `<strong>¬°Correcto!</strong> ${expl}`;
                fb.className = "feedback show success";
                playSound('correct');
            } else {
                btn.classList.add('incorrect');
                parent.querySelectorAll('button')[cOpt].classList.add('correct');
                fb.innerHTML = `<strong>¬°Vaya!</strong> ${expl}`;
                fb.className = "feedback show error";
                playSound('incorrect');
            }
        }

        /* --- SIMULACRO --- */
        function startSimulacro() {
            document.getElementById('startSimContainer').style.display = 'none';
            document.getElementById('simulacroContainer').style.display = 'block';
            const shuffled = simulacroPool.sort(() => 0.5 - Math.random()).slice(0, 10); // 10 questions for demo
            let html = '';
            shuffled.forEach((q, i) => {
                html += `<div class="sim-question" data-a="${q.a}" data-expl="${q.expl || ''}" style="margin-bottom:20px; background:var(--card-bg); padding:15px; border-radius:10px;">
                    <div class="question">${i+1}. ${q.q}</div>
                    ${q.options.map((opt, idx) => `<label style="display:block; margin:5px 0;"><input type="radio" name="sq${i}" value="${idx}"> ${opt}</label>`).join('')}
                    <div class="sim-fb" style="display:none; margin-top:5px; font-size:0.9rem;"></div>
                </div>`;
            });
            document.getElementById('simulacroQuestions').innerHTML = html;
        }

        function gradeSimulacro() {
            let score = 0;
            const qs = document.querySelectorAll('.sim-question');
            qs.forEach(q => {
                const correct = parseInt(q.dataset.a);
                const sel = q.querySelector('input:checked');
                const fb = q.querySelector('.sim-fb');
                const inputs = q.querySelectorAll('input');
                
                inputs.forEach((inp, idx) => {
                    if(idx===correct) inp.parentElement.style.color = "var(--green)";
                    inp.disabled = true;
                });

                if(sel && parseInt(sel.value)===correct) {
                    score++;
                    q.style.border = "2px solid var(--green)";
                    fb.innerHTML = `<span style="color:var(--green)">¬°Correcto!</span>`;
                } else {
                    q.style.border = "2px solid red";
                    fb.innerHTML = `<span style="color:red">Error. ${q.dataset.expl}</span>`;
                }
                fb.style.display = 'block';
            });
            
            if(score > (qs.length/2)) playSound('correct'); else playSound('incorrect');
            
            document.getElementById('simulacroContainer').querySelector('.big-btn').style.display = 'none';
            document.getElementById('simulacroResult').style.display = 'block';
            document.getElementById('finalScore').innerText = `${score} / ${qs.length}`;
            
            if(score >= qs.length - 2) {
                document.getElementById('badgeSim').classList.add('earned');
                localStorage.setItem('aulakids_badgeSim', 'true');
            }
        }

        /* --- PROGRESS --- */
        function updateProgress() {
            let completed = 0;
            const ids = ['t5_b1', 't5_b2', 't5_b3', 't5_b4', 't6_b1', 't6_b2', 't6_b3', 't6_b4'];
            ids.forEach(id => {
                const chks = document.querySelectorAll(`#${id} .checklist input`);
                const all = Array.from(chks).every(c => c.checked);
                if(all && chks.length > 0) {
                    document.getElementById(`check_${id}`).innerText = 'üü¢';
                    completed++;
                    progress[id] = true;
                } else {
                    document.getElementById(`check_${id}`).innerText = '‚ö™';
                    progress[id] = false;
                }
            });

            document.getElementById('blocksCompleted').innerText = completed;
            document.getElementById('globalProgress').innerText = Math.round((completed/8)*100) + '%';
            
            // Unlock Diploma Logic
            if(completed === 8) {
                document.getElementById('diploma-unlock-msg').style.display = 'block';
            }

            // Badges
            if(progress.t5_b1 && progress.t5_b2 && progress.t5_b3 && progress.t5_b4) document.getElementById('badge5').classList.add('earned');
            if(progress.t6_b1 && progress.t6_b2 && progress.t6_b3 && progress.t6_b4) document.getElementById('badge6').classList.add('earned');

            localStorage.setItem('aulakids_prog', JSON.stringify(progress));
            
            // Save checks
            const checkState = {};
            document.querySelectorAll('input[type="checkbox"]').forEach((c, i) => checkState[i] = c.checked);
            localStorage.setItem('aulakids_checks', JSON.stringify(checkState));
        }

        function loadProgress() {
            const p = JSON.parse(localStorage.getItem('aulakids_prog'));
            if(p) progress = p;
            
            const c = JSON.parse(localStorage.getItem('aulakids_checks'));
            if(c) document.querySelectorAll('input[type="checkbox"]').forEach((chk, i) => { if(c[i]) chk.checked = true; });

            if(localStorage.getItem('aulakids_badgeSim')) document.getElementById('badgeSim').classList.add('earned');
            
            updateProgress();
        }

        function resetProgress() {
            if(confirm("¬øBorrar todo el progreso?")) {
                localStorage.clear();
                location.reload();
            }
        }
    </script>
</body>
</html>